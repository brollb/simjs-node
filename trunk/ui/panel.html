<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
	"http://www.w3.org/TR/html4/loose.dtd">

<html>
<head>
	<meta http-equiv="Content-type" content="text/html; charset=utf-8">
	<title>Sim Panel test</title>
	<script src="../src/sim.js" type="text/javascript" charset="utf-8"></script>
	<script src="../src/random.js" type="text/javascript" charset="utf-8"></script>
	<script src="../src/request.js" type="text/javascript" charset="utf-8"></script>
	<script src="../src/stats.js" type="text/javascript" charset="utf-8"></script>
	<script src="../src/queues.js" type="text/javascript" charset="utf-8"></script>
	
	<script src="lib/jquery-1.6.2.min.js" type="text/javascript" charset="utf-8"></script>
	<script src="lib/jquery-ui-1.8.16.custom.min.js" type="text/javascript" charset="utf-8"></script>
	<script src="lib/raphael-min.js" type="text/javascript" charset="utf-8"></script>
	
	
	<script src="simpanel.js" type="text/javascript" charset="utf-8"></script>
	<script src="queue.js" type="text/javascript" charset="utf-8"></script>
	
	<link rel="stylesheet" href="panel.css" type="text/css" media="screen" title="no title" charset="utf-8">
	<link rel="stylesheet" href="css/jquery-ui-1.8.16.custom.css" type="text/css" media="screen" title="no title" charset="utf-8">
	
	<script type="text/javascript" charset="utf-8">

		$(function () {
			/*
			SimPanel.load('simpanel', function (event) {
				switch (event) {
					case SimPanel.PLAY:
						SimPanel.sim = createSim();
						$('#log').append("Simulation started<br>");
						return true;
					case SimPanel.PAUSE:
						$('#log').append("Simulation paused<br>");
						break;
					case SimPanel.RESUME:
						$('#log').append("Simulation resumed<br>");
						break;
					case SimPanel.STOP:
						$('#log').append("Simulation stopped<br>");
						break;
					case SimPanel.TICK:
						$('#log').append("Simulation tick<br>");
						break;
					case SimPanel.COMPLETE:
					var sim = SimPanel.sim;
						$('#log').append("Simulation finished!!<br>");
						var service = mm1.service;
						var msg = "<pre>Simulation Time = " + sim.time()
												+ "\nUsage = " + (service.usage() / sim.time())
												+ "\nService mean time = " + service.systemStats().durationSeries.average()
												+ "\nService mean customer = " + service.systemStats().sizeSeries.average()
												+ "\nQueue mean time = " + service.queueStats().durationSeries.average()
												+ "\nQueue mean customer = " + service.queueStats().sizeSeries.average()
												+ "</pre>";
						$('#log').append(msg);
						break;
				}
			});
			*/
			
			QueueApp.init();
			QueueApp.reset();
			/*
			QueueApp.load('[\
			    {\
			        "x": 22,\
			        "y": 197,\
			        "type": "source",\
			        "name": "source_1",\
			        "out": "queue_1"\
			    },\
			    {\
			        "x": 281,\
			        "y": 161,\
			        "type": "queue",\
			        "name": "queue_2"\
			    },\
			    {\
			        "x": 50,\
			        "y": 50,\
			        "type": "queue",\
			        "name": "queue_1",\
			        "out": "queue_2"\
			    }\
			]');
		});
		*/
		QueueApp.load('[{"x":22,"y":197,"type":"source","name":"source_1","out":"queue_1","model":{"lambda":1}},{"x":281,"y":161,"type":"queue","name":"queue_2","model":{"nservers":1,"mu":0.5,"infinite":true,"maxqlen":0}},{"x":135,"y":47,"type":"queue","name":"queue_1","out":"queue_2","model":{"nservers":1,"mu":0.5,"infinite":true,"maxqlen":0}}]');
		
	});
		
	</script>
</head>

<body>


	<div id="sim_progress">

	</div>

	<div id="toolbar_div">
		<span id="toolbar" class="ui-widget-header ui-corner-all">
			<span id="file_ops">
				<button id="new_file">New Canvas</button>
				<button id="load_file">Load a file</button>
				<button id="save_file">Save to file</button>
			</span>
			
			<span id="new_ops">
				<button id="new_server">Queue</button>
				<button id="new_source">Source</button>
				<button id="new_splitter">Splitter</button>
				<button id="new_monitor">Monitor</button>
				<input type="checkbox" id="connect" /><label for="connect">Connect</label>
			</span>

			<span id="sim_play_ops">
							<div id="progressbar"></div>
				<button id="pause_sim">Pause</button>
				<button id="stop_sim">Stop</button>
			</span>
			<span id="sim_ops">
				<button id="play_sim">Simulate</button>
				<button id="config_sim">5000 sec</button>
			</span>
			
			<!--button id="connect">Create Connections</button>
			<button id="stop">stop</button>
			<button id="forward">fast forward</button>
			<button id="end">go to end</button>

			<input type="checkbox" id="shuffle" /><label for="shuffle">Shuffle</label>

			<span id="repeat">
				<input type="radio" id="repeat0" name="repeat" checked="checked" /><label for="repeat0">No Repeat</label>
				<input type="radio" id="repeat1" name="repeat" /><label for="repeat1">Once</label>
				<input type="radio" id="repeatall" name="repeat" /><label for="repeatall">All</label>
			</span-->
		</span>
	</div>


	<div id="canvas">	
	</div>
	
	<div id="server_form" title="Server Properties">
		<form>
		<fieldset>
			<label for="server_form_name">Name</label>
			<input type="text" name="server_form_name" id="server_form_name" class="text ui-widget-content ui-corner-all" />
			<label for="email">Average Service Duration [1 / mu] (sec)</label>
			<input type="text" name="server_form_rate" id="server_form_rate" value="" class="text ui-widget-content ui-corner-all" />
		</fieldset>
		</form>
	</div>

	
</body>

</html>